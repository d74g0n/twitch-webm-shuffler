<!DOCTYPE html>
<html lang="">
<center>

    <body>
        <video id="mytv" width="1920" height="1080" autoplay>
        </video>
    </body>
</center>
<script>
    let filecount = 25; // change this to match your file count
    let tv = document.getElementById('mytv');
    let pl = createArray(filecount);
    // console.log(pl);

    function playVideo(vid) {
        tv.src = vid + ".webm";
        tv.autoplay = true;
    }

    function playlist() {
        if (pl.length === 1) {
            pl = createArray(filecount);
            console.log("Array Rerolled");
        }
        playVideo(pl.shift());
    }

    function createArray(len) {
        let mylist = [];

        for (let i = 0; i <= len; i++) { // create array of numbers
            mylist[i] = i;
        }

        function shuffleArray(array) { // shuffle numbers
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        mylist = shuffleArray(mylist);
        return mylist;
    }

    playlist();

    tv.addEventListener("ended", (event) => {
        playlist();
    });

    tv.addEventListener("error", (event) => {
        console.log(`error occurred with file`);
        playlist();
    });

    window.onclick = function() { // chrome debugging
        playlist();
    }

</script>

</html>
